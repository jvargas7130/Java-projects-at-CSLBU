import java.net.*;
import java.io.*;
import java.util.Scanner;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

import javax.swing.JButton;
public class Clientchat extends JPanel{



	/**
	 * used to create a connection with client
	 */
	private Socket sock;

	/**
	 * used to receive messages
	 */
	private BufferedReader read;

	/**
	 * used to write messages to client
	 */
	private PrintStream write;

	/**
	 * Server chat method makes sure there is a connection bettween server and client
	 * 
	 */
	public Clientchat() {
		
		fire  = new JButton("Fire");
		water = new JButton("Water");
		grass = new JButton("Grass");
		
		fire.addActionListener(this);
		water.addActionListener(this);
		grass.addActionListener(this);


		add(fire);
		add(water);
		add(grass);

		try {
			System.out.println("Requesting Connection.....");
			sock = new Socket("localhost", 1234);
			read = new BufferedReader( new InputStreamReader( sock.getInputStream()));
			write = new PrintStream(sock.getOutputStream());
			System.out.println("Connected.");
		} catch (IOException e) {
			e.printStackTrace();
		}
		
	

	}
		
	/**
	 * public void run receives client messages
	 * 
	 */
	public void run() {
		while (true) {
			try {
				System.out.println("Server:" + read.readLine());
			} catch (IOException e) {
				e.printStackTrace();
			}

		}
	}
	
	/**
	 * Write method writes messages to client
	 * 
	 */
	public void write (){
		Scanner in = new Scanner (System.in);
		while(true){
			System.out.println("Client ->");
			write.println(in.nextLine());
		}
	}
	
	/**
	 * main starts the server and writes
	 * 
	 * @param args
	 */
	public static void main(String args[]){
		ServerChat chat = new ServerChat();
		chat.start();
		chat.write();
		
	}
	
	


}
