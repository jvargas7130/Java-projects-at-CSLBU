import java.net.*;
import java.io.*;
import java.util.Scanner;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Clientchat extends JPanel implements ActionListener, MouseListener, MouseMotionListener, KeyListener {

	JTextField tfInfo;
	JLabel lblColor, lblShapes;
	JCheckBox cbRed, cbBlue;
	ButtonGroup shapes;
	JRadioButton rbCircle, rbSquare;
	JButton fire;
	JButton water;
	JButton grass;

	private char player;
	private char computer;
	
	private int compScore;
	private int playScore;
	
	private int winner;

	

	/**
	 * used to create a connection with client
	 */
	private Socket sock;

	/**
	 * used to receive messages
	 */
	private BufferedReader read;

	/**
	 * used to write messages to client
	 */
	private PrintStream write;

	/**
	 * Server chat method makes sure there is a connection bettween server and
	 * client
	 * 
	 */
	public Clientchat() {

		// fire = new JButton(new ImageIcon(new
		// ImageIcon("./fire.png").getImage().getScaledInstance(40, 40,
		// Image.SCALE_DEFAULT)));
		fire = new JButton("fire");
		water = new JButton("Water");
		grass = new JButton("Grass");

		fire.addActionListener(this);
		water.addActionListener(this);
		grass.addActionListener(this);

		add(fire);
		add(water);
		add(grass);

	
		try {

			System.out.println("Requesting Connection.....");
			sock = new Socket("localhost", 1235);
			read = new BufferedReader(new InputStreamReader(sock.getInputStream()));
			write = new PrintStream(sock.getOutputStream());
			System.out.println("Connected.");
		} catch (IOException e) {
			e.printStackTrace();
		}
		//String str = "" + computer +"" + winner + "" + pWins + "" + cWins ;
		Thread a = new Thread() {

			public void run() {
				while (true) {

					try {	
						System.out.println("Server:" + read.readLine());
						
					String line = read.readLine();
					String [] tokens = line.split("/");
					String comp = tokens[ 0 ];
					String play  = tokens[1];
					String win = tokens[ 2 ];
					String pwins = tokens[3];
					String cwins = tokens[4];
					
					computer = 
					
					
						repaint();
						
						//player = 'n';
						//c = 'n';
					} catch (IOException e) {
						e.printStackTrace();
					}

				}
			}
		};
		a.start();

	}

	public void paintComponent(Graphics g) {

		super.paintComponent(g);

		g.setColor(Color.GREEN);
		g.drawRect(0, 0, 400, 200);// building
		g.setFont(new Font("Arial", Font.PLAIN, 40));


	
		if (player == 'f') {
			g.drawString("Player chose fire", 800, 300);
		} else if (player == 'w') {
			g.drawString("Player chose water ", 800, 300);
		} else if (player == 'g') {
			g.drawString("Player chose grass ", 800, 300);
		} else {

		}

		if (computer == 'f') {
			g.drawString("Computer chose fire", 800, 350);
		} else if (computer == 'w') {
			g.drawString("Computer chose water ", 800, 350);
		} else if (computer == 'g') {
			g.drawString("Computer chose grass ", 800, 350);
		} else {

		}

		g.setFont(new Font("Arial", Font.PLAIN, 40));
		
		// 1.fire beats 3.grass
		// 3.grass beats 2.water
		// 2.water beats 1.fire
		if (winner == 1) {

			g.drawString("Player   Wins ", 850, 500);
		} else if (winner == -1) {

			g.drawString("Computer Wins ", 850, 500);
		} else if(winner == 2){
			g.drawString("TIE! ", 850, 500);
		} else {

		}

		g.setFont(new Font("Arial", Font.PLAIN, 40));
		g.drawString("Computer Score: " + compScore, 50, 50);
		g.drawString("Player   Score: " + playScore, 50, 100);

		try {
			Thread.sleep(9); // ~60 fps
		} catch (InterruptedException e) {

		}

	}

	public static void main(String args[]) {

	}

	



	

	/**
	 * Winner method checks determines the winner
	 * 
	 * 
	 * @param player
	 *            object is passed in
	 * 
	 * @param c
	 *            computer object is passed in t
	 * 
	 * @param pattern
	 *            string pattern is passed in
	 * 
	 * @param computer
	 *            computer integer is passed in
	 * 
	 * @return win integer win choise is returned
	 */


	@Override
	public void keyPressed(KeyEvent arg0) {
		// TODO Auto-generated method stub

	}

	@Override
	public void keyReleased(KeyEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void keyTyped(KeyEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mouseDragged(MouseEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mouseMoved(MouseEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mouseClicked(MouseEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mouseEntered(MouseEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mouseExited(MouseEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mousePressed(MouseEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void mouseReleased(MouseEvent e) {
		// TODO Auto-generated method stub

	}

	@Override
	public void actionPerformed(ActionEvent e) {

		Scanner in = new Scanner(System.in);

		if (e.getSource() == fire) {
			player = 'f';

			// char fire = 'f';
			System.out.println("Client ->");
			write.println("f");

		} else if (e.getSource() == water) {
			player = 'w';

			System.out.println("Client ->");
			write.println("w");

		} else if (e.getSource() == grass) {
			player = 'g';

			System.out.println("Client ->");
			write.println("g");

		}

	}

}
